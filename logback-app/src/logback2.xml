<?xml version="1.0" encoding="UTF-8"?>  
<configuration>
    <!--
        CONSOLE: 表示当前的日志信息是可以控制台输出的
         -->
    <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
        <!-- 输出流对象 默认 System.out 改为 System.err -->
        <target>System.err</target>
        <encoder>
             <!--格式化输出,%d:日期;%thread:线程名;%-5level：级别,从左显示5个字符宽度;%msg:日志消息;%n:换行符-->   
            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n</pattern>     
        </encoder>  
    </appender>

    <!-- File是输出的方向通向文件的 -->
    <appender name="FILE"  class="ch.qos.logback.core.rolling.RollingFileAppender">     
        <encoder>
            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n</pattern>
            <charset>utf-8</charset>>
        </encoder>
        <!--日志输出路径-->
        <file>C:/code/itheima-date.log</file>
        <!-- 指定日志文件拆分和压缩规则-->
       <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">  
         <MaxFileSize>10MB</MaxFileSize>  
       </triggeringPolicy>  
    </appender>   
   <!-- show parameters for hibernate sql 专为 Hibernate 定制 -->   
    <logger name="org.hibernate.type.descriptor.sql.BasicBinder"  level="TRACE" />    
    <logger name="org.hibernate.type.descriptor.sql.BasicExtractor"  level="DEBUG" />    
    <logger name="org.hibernate.SQL" level="DEBUG" />    
    <logger name="org.hibernate.engine.QueryParameters" level="DEBUG" />  
    <logger name="org.hibernate.engine.query.HQLQueryPlan" level="DEBUG" />    
      
    <!--myibatis log configure-->   
    <logger name="com.apache.ibatis" level="TRACE"/>  
    <logger name="java.sql.Connection" level="DEBUG"/>  
    <logger name="java.sql.Statement" level="DEBUG"/>  
    <logger name="java.sql.PreparedStatement" level="DEBUG"/>  
      
    <!-- 日志输出级别 -->  
    <root level="INFO">  
        <appender-ref ref="STDOUT" />  
        <appender-ref ref="FILE" />  
    </root>   
     <!--日志异步到数据库 -->    
    <appender name="DB" class="ch.qos.logback.classic.db.DBAppender">  
        <!--日志异步到数据库 -->   
        <connectionSource class="ch.qos.logback.core.db.DriverManagerConnectionSource">  
           <!--连接池 -->   
           <dataSource class="com.mchange.v2.c3p0.ComboPooledDataSource">  
              <driverClass>com.mysql.jdbc.Driver</driverClass>  
              <url>jdbc:mysql://127.0.0.1:3306/databaseName</url>  
              <user>root</user>  
              <password>root</password>  
            </dataSource>  
        </connectionSource>  
  </appender>  
</configuration> 